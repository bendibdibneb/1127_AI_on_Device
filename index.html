// App.js
// 離線冷笑話 App（React Native + Expo）
// 功能：內建至少 30 則中文冷笑話，完全離線，每次按鈕隨機顯示一則

import React, { useState } from 'react';
import { SafeAreaView, View, Text, TouchableOpacity, StyleSheet, StatusBar, Platform, Clipboard, Alert } from 'react-native';

const JOKES = [
  '我告訴冰箱一個秘密，現在它一直封存。',
  '有一天鉛筆跑去旅行，結果被筆芯留在原地。',
  '魚開派對，結果沒人帶泡泡。',
  '冰淇淋和太陽相遇，冰淇淋說：別靠太近，我會融化的。',
  '小明的床很會說話，因為它每天都在發牢騷（床怨）。',
  '月亮去看牙醫，因為它有一顆壞星（壞齒）。',
  '蘋果對香蕉說：你真滑稽。香蕉回：誰才滑稽？（滑稽=滑皮）',
  '為什麼數學老師喜歡花園？因為有很多根（根號）。',
  '影子跟太陽吵架，結果被懲罰：曬黑。',
  '狗跑進音樂教室，老師說：你有節奏感（汪）。',
  '椅子去旅行，結果坐下來休息。',
  '手機去健身房，最後只學會滑手機。',
  '電腦吃太多零食，結果中毒了（玩笑）。',
  '番茄和黃瓜比跑步，番茄先紅了。',
  '為什麼書喜歡上床？因為它想被翻頁。',
  '月亮請假了，因為它要滿（月）休假。',
  '為什麼鐘錶總是很忙？因為它分秒必爭。',
  '電燈對燈泡說：你真亮眼。',
  '為什麼鉛筆不會哭？因為它有橡皮擦掉情緒。',
  '咖啡和茶比賽，咖啡贏了，因為它比較提神。',
  '葡萄看電影流淚，因為片尾有葡萄乾（過感動）。',
  '雲去上班遲到，結果被雇主雲（運）走。',
  '為什麼植物喜歡社交？因為它們有根基。',
  '海豚去唱歌比賽，結果一鳴驚人（驚浪）。',
  '為什麼音符去旅行？因為它想找到節奏。',
  '如果時間會寫日記，它一定會記得每一刻。',
  '為什麼燈塔總是孤單？因為它只會發光，不會聊天。',
  '蛋糕開派對，大家都搶著吃，最後只剩碎心情。',
  '為什麼山很有耐心？因為它一直在等日出。',
  '牙刷向牙膏告白：你是我的磨擦，讓我每天都不孤單。',
  '番茄哭了，因為它被壓成醬（感情）。',
  '為什麼筆記本很會記東西？因為它每天都有頁。',
  '月亮上班羨慕太陽，因為太陽有光環（太陽光）。',
  '如果鉛筆旅行，會帶幾支？答案：看你畫幾幅。',
  '為什麼鬧鐘討厭周末？因為它要被按掉。'
];

export default function App() {
  const [index, setIndex] = useState(() => Math.floor(Math.random() * JOKES.length));

  function showRandom() {
    if (JOKES.length === 0) return;
    let next = Math.floor(Math.random() * JOKES.length);
    // 避免重複同一則（若只有一則則允許）
    if (JOKES.length > 1) {
      while (next === index) {
        next = Math.floor(Math.random() * JOKES.length);
      }
    }
    setIndex(next);
  }

  function copyToClipboard() {
    const joke = JOKES[index];
    try {
      Clipboard.setString(joke);
      Alert.alert('已複製到剪貼簿');
    } catch (e) {
      Alert.alert('複製失敗');
    }
  }

  return (
    <SafeAreaView style={styles.safe}>
      <StatusBar barStyle="dark-content" />
      <View style={styles.container}>
        <Text style={styles.title}>離線冷笑話</Text>

        <View style={styles.card}>
          <Text style={styles.joke} selectable>{JOKES[index]}</Text>
        </View>

        <View style={styles.row}>
          <TouchableOpacity style={[styles.button, styles.btnPrimary]} onPress={showRandom} activeOpacity={0.8}>
            <Text style={styles.btnText}>換一則</Text>
          </TouchableOpacity>

          <TouchableOpacity style={[styles.button, styles.btnSecondary]} onPress={copyToClipboard} activeOpacity={0.8}>
            <Text style={styles.btnText}>複製</Text>
          </TouchableOpacity>
        </View>

        <Text style={styles.hint}>完全離線、內建笑話。長按笑話可選取文字。</Text>
      </View>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  safe: { flex: 1, backgroundColor: '#fff' },
  container: { flex: 1, padding: 20, alignItems: 'center', justifyContent: 'center' },
  title: { fontSize: 28, fontWeight: '700', marginBottom: 20 },
  card: { width: '100%', minHeight: 160, backgroundColor: '#f7f7f7', borderRadius: 12, padding: 18, justifyContent: 'center', alignItems: 'center', borderWidth: 1, borderColor: '#eee' },
  joke: { fontSize: 18, lineHeight: 28, textAlign: 'center' },
  row: { flexDirection: 'row', marginTop: 20, width: '100%', justifyContent: 'space-between' },
  button: { flex: 1, paddingVertical: 14, marginHorizontal: 6, borderRadius: 10, alignItems: 'center', justifyContent: 'center' },
  btnPrimary: { backgroundColor: '#2d9cdb' },
  btnSecondary: { backgroundColor: '#95a5a6' },
  btnText: { color: 'white', fontWeight: '600' },
  hint: { marginTop: 18, fontSize: 12, color: '#888' }
});

